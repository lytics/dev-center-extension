import{r,j as n,c as m}from"./client.WVs9LN-p.js";import{t as g,e as p}from"./entityStorage.gsd-v-Yj.js";import{E as o}from"./EmitLog.FK_2_mMb.js";import"./_commonjsHelpers.4gQjN7DL.js";import"./base.zwil0R1V.js";function u(){let i=0;return r.useEffect(()=>{const s=()=>{const t=document.createElement("script");t.src=chrome.runtime.getURL("/src/pages/tagLink/index.js"),t.onload=()=>{t.remove()},document.documentElement.appendChild(t)};s();const c=t=>{t.data&&t.data.type==="retry"&&(i++,o({name:"retry",payload:{retries:i}}),s())};window.addEventListener("message",c),window.addEventListener("message",function(t){if(t.source===window&&t.data.action==="backgroundToContent"){const e=t.data.data;o({name:"message",payload:{msg:"Received message from background in content.",data:e}})}}),chrome.runtime.onMessage.addListener(t=>{t.action=="getConfig"&&window.postMessage({action:"getConfig"},"*"),t.action=="getEntity"&&window.postMessage({action:"getEntity"},"*")}),document.addEventListener("config",function(t){const e=t.detail.data;g.set(e).then(()=>{o({name:"storage",payload:{msg:"Tag config saved."}})})}),document.addEventListener("entity",function(t){const e=t.detail.data;p.set(e).then(()=>{o({name:"storage",payload:{msg:"Entity saved."}})})})},[]),r.useEffect(()=>{},[]),n.jsx(n.Fragment,{})}const a=document.createElement("div");a.id="chrome-extension-boilerplate-react-vite-content-view-root";document.body.append(a);const d=document.createElement("div");d.id="shadow-root";const f=a.attachShadow({mode:"open"});f.appendChild(d);m(d).render(n.jsx(u,{}));
